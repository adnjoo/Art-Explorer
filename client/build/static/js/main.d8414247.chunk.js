(this["webpackJsonpart-explorer"]=this["webpackJsonpart-explorer"]||[]).push([[0],{116:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(30),c=n.n(s),o=n(8),i=n(14),u=n.n(i),l=n(18),j=n(10),b=n(42),d=n(17),h=n(28),p=(n(82),n(83),"https://protected-reaches-25441.herokuapp.com/"),m="d7b5e06fed971b560f2f",x="92122aaf680fe0def89ce3bcc6d9d1d5",f="https://api.artsy.net/api/tokens/xapp_token",O=["Ai Weiwei","Andy Warhol","Auguste Rodin","Banksy","Cai Guo-Qiang \u8521\u56fd\u5f3a","Claude Monet","Da Vinci","Damien Hirst","David Hockney","El Greco","Elmgreen & Dragset","Georgia O\u2019Keeffe","Hito Steyerl","J. M. W. Turner","Jackson Pollock","Jean-Michel Basquiat","Joseph Beuys","KAWS","Lee Bul","Marina Abramovi\u0107","Mark Rothko","Michael Heizer","Michelangelo Buonarroti","Norman Rockwell","Oscar Murillo","Paul Gauguin","Picasso","Raphael","Richard Serra","Takashi Murakami","Tintoretto","Van Gogh","Wassily Kandinsky","Yayoi Kusama","Yves Klein"],g=["https://d32dm0rphc51dk.cloudfront.net/X9vVvod7QY73ZwLDSZzljw/square.jpg","https://raw.githubusercontent.com/adnjoo/artExplorer/main/assets/mona2.png"],v=n(21),k=n.n(v),y=n(125),w=n(3),S=function(e){var t=e.profileArtistName,n=e.isAuthenticated,r=e.artists,s=e.getFav,c=Object(a.useState)(""),o=Object(j.a)(c,2),i=o[0],b=o[1];Object(a.useEffect)((function(){console.log("searchartists-artists are",r)}),[r]),Object(a.useEffect)((function(){b(t)}),[t]),Object(a.useEffect)((function(){""!==i&&G(i)}),[i]);var d,h=function(e){var t=e.name,n=e.isAuthenticated,r=Object(a.useState)(""),c=Object(j.a)(r,2),o=c[0],i=c[1];Object(a.useEffect)((function(){i(t),console.log("name is",t)}),[t]);return n?Object(w.jsx)("div",{className:"my-3",children:Object(w.jsx)("button",{className:"btn btn-primary",onClick:function(){var e={"Content-Type":"application/json",token:localStorage.token};k.a.post("".concat(p,"api/addartist"),{name:o},{headers:e}).then((function(e){s()}))},children:"Follow"})}):Object(w.jsx)("div",{})},g=function(e){var t=e.isAuthenticated;return N?Object(w.jsx)(y.a,{children:Object(w.jsxs)(y.a.Body,{children:[Object(w.jsx)(y.a.Title,{children:C.title}),Object(w.jsx)(h,{name:C.title,isAuthenticated:t}),Object(w.jsx)("a",{href:C._links.permalink.href,target:"_blank",rel:"noreferrer",children:Object(w.jsx)("img",{alt:"thumbnail",src:C._links.thumbnail.href})}),Object(w.jsx)(y.a.Text,{id:"biography",children:""===D?"no bio available":D})]})}):Object(w.jsx)("div",{})},v=Object(a.useState)(!1),S=Object(j.a)(v,2),N=S[0],A=S[1],T=Object(a.useState)({_links:{permalink:{href:""},thumbnail:{href:""}},biography:""}),_=Object(j.a)(T,2),C=_[0],E=_[1],L=Object(a.useState)(""),P=Object(j.a)(L,2),D=P[0],M=P[1],B=Object(a.useState)(""),R=Object(j.a)(B,2),I=R[0],J=R[1];Object(a.useEffect)((function(){X()}),[]);var G=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t);case 2:if("no-artist-found"!==(n=e.sent)){e.next=8;break}return(a=C).title="artist not found",E(a),e.abrupt("return");case 8:return E(n),r=n._links.self.href,e.next=12,k.a.get(r,{headers:{"X-XAPP-Token":d}});case 12:s=e.sent,M(s.data.biography);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e){"Enter"===e.key&&G(i)},K=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),console.log(N),e.next=4,k.a.post(f,{client_id:m,client_secret:x});case 4:return n=e.sent,d=n.data.token,e.next=8,k.a.get("https://api.artsy.net/api/search?q=".concat(t,"+more:pagemap:metatags-og_type:artist"),{headers:{"X-XAPP-Token":d}});case 8:a=e.sent,console.log(a.data._embedded),e.t0=u.a.keys(a.data._embedded.results);case 11:if((e.t1=e.t0()).done){e.next=17;break}if(r=e.t1.value,"artist"!==a.data._embedded.results[r].type){e.next=15;break}return e.abrupt("return",a.data._embedded.results[r]);case 15:e.next=11;break;case 17:return e.abrupt("return","no-artist-found");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){J(O[Math.floor(Math.random()*O.length)])};return N?Object(w.jsxs)("div",{className:"container text-center border my-2",children:[Object(w.jsx)("h2",{children:"Search for artists"}),Object(w.jsxs)("h4",{onClick:function(){G(I),X()},children:["e.g. \xa0",I]}),Object(w.jsx)("input",{value:i,onChange:function(e){return b(e.target.value)},onKeyDown:F}),Object(w.jsx)(g,{isAuthenticated:n}),Object(w.jsx)("div",{className:"mb-5"})]}):Object(w.jsxs)("div",{className:"container text-center border mt-5",children:[Object(w.jsx)("h2",{children:"Search for artists"}),Object(w.jsxs)("h4",{onClick:function(){G(I),X()},children:["e.g. \xa0",I]}),Object(w.jsx)("br",{}),Object(w.jsx)("input",{style:{minWidth:"220"},value:i,onChange:function(e){return b(e.target.value)},onKeyDown:F})]})},N=n(122),A=n(123),T=n(121),_=n(124),C=function(e){var t=e.setAuth,n=e.isAuth,a=e.userName,r=e.getUserName,s=function(){return Object(w.jsxs)(N.a,{title:"Login/Register",children:[Object(w.jsx)(N.a.Item,{href:"/login",children:"Login"}),Object(w.jsx)(N.a.Item,{href:"/register",children:"Register"})]})},c=function(){return r(),Object(w.jsxs)(N.a,{title:"Hi! ".concat(a),children:[Object(w.jsx)(N.a.Item,{href:"/profile",children:"Profile"}),Object(w.jsx)(N.a.Divider,{}),Object(w.jsx)(N.a.Item,{onClick:function(e){!function(e){e.preventDefault(),localStorage.removeItem("token"),t(!1),h.a.success("Logged out successfully.")}(e)},children:"Logout"})]})},o=function(e){return e.isAuth?Object(w.jsx)(c,{}):Object(w.jsx)(s,{})};return Object(w.jsx)("div",{children:Object(w.jsx)(A.a,{bg:"dark",variant:"dark",expand:"lg",children:Object(w.jsxs)(T.a,{"data-testid":"container",children:[Object(w.jsxs)(_.a,{className:"me-auto",children:[Object(w.jsxs)(A.a.Brand,{href:"/",children:[Object(w.jsx)("img",{alt:"",src:"https://raw.githubusercontent.com/adnjoo/capstone/main/assets/mona2.png",width:"25",height:"30",className:"d-inline-block align-top"})," ","artExplorer"]}),Object(w.jsx)(_.a.Link,{href:"/artworks",children:"Artworks"}),Object(w.jsx)(_.a.Link,{href:"/artmovements",children:"Art-movements"}),Object(w.jsx)(_.a.Link,{href:"/popularartists",children:"Popular artists"})]}),Object(w.jsx)(o,{isAuth:n})]})})})},E=n(11),L=function(e){var t=e.setAuth,n=Object(a.useState)({email:"",password:"",name:""}),r=Object(j.a)(n,2),s=r[0],c=r[1],i=s.email,d=s.password,m=s.name,x=function(e){return c(Object(o.a)(Object(o.a)({},s),{},Object(E.a)({},e.target.name,e.target.value)))},f=function(){var e=Object(l.a)(u.a.mark((function e(n){var a,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,a={name:m,email:i,password:d},e.next=5,fetch("".concat(p,"auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 5:return r=e.sent,e.next=8,r.json();case 8:s=e.sent,console.log(s),s.token?(console.log("testing123"),localStorage.setItem("token",s.token),t(!0),h.a.success("Registered successfully")):(t(!1),h.a.error(s)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)(T.a,{className:"my-5 py-5 border",style:{width:"400px",padding:"2em"},children:[Object(w.jsx)("h3",{className:"text-center",children:"Register"}),Object(w.jsxs)("form",{className:"mb-3",onSubmit:f,children:[Object(w.jsx)("input",{type:"text",name:"name",placeholder:"Username",className:"form-control my-3",value:m,onChange:function(e){return x(e)}}),Object(w.jsx)("input",{type:"email",name:"email",placeholder:"Email",className:"form-control my-3",value:i,onChange:function(e){return x(e)}}),Object(w.jsx)("input",{type:"password",name:"password",placeholder:"Password",className:"form-control my-3",value:d,onChange:function(e){return x(e)}}),Object(w.jsx)("button",{className:"btn btn-success w-100",children:"Sign up"})]}),Object(w.jsx)("div",{className:"text-center",children:Object(w.jsx)(b.b,{to:"/login",style:{textDecoration:"none"},children:"Login"})})]})},P=function(e){var t=e.setAuth,n=e.getUserName,r=Object(a.useState)({email:"",password:""}),s=Object(j.a)(r,2),c=s[0],i=s[1],d=c.email,m=c.password,x=function(e){return i(Object(o.a)(Object(o.a)({},c),{},Object(E.a)({},e.target.name,e.target.value)))},f=function(){var e=Object(l.a)(u.a.mark((function e(a){var r,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,r={email:d,password:m},e.next=5,fetch("".concat(p,"auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 5:return s=e.sent,e.next=8,s.json();case 8:c=e.sent,console.log(c),c.token?(localStorage.setItem("token",c.token),t(!0),h.a.success("Successfully logged in"),n()):(t(!1),h.a.error(c)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(u.a.mark((function e(){var a,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={email:"demo@demo.com",password:"demo"},e.next=3,fetch("".concat(p,"auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return r=e.sent,e.next=6,r.json();case 6:s=e.sent,console.log("parseres is ",s),s.token&&(localStorage.setItem("token",s.token),t(!0),h.a.success("Successfully logged in"),n());case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)(T.a,{className:"my-5 py-5 border",style:{width:"400px",padding:"2em"},children:[Object(w.jsx)("h3",{className:"text-center",children:"Login"}),Object(w.jsxs)("form",{className:"text-center mt-5 mb-3",onSubmit:f,children:[Object(w.jsx)("input",{type:"email",name:"email",placeholder:"Email",className:"form-control my-3",value:d,onChange:function(e){return x(e)}}),Object(w.jsx)("input",{type:"password",name:"password",placeholder:"Password",className:"form-control my-3",value:m,onChange:function(e){return x(e)}}),Object(w.jsx)("button",{className:"btn btn-success w-100",children:"Login"})]}),Object(w.jsxs)("div",{className:"text-center",children:[Object(w.jsx)("button",{className:"btn btn-warning w-100 mb-3",onClick:function(){O()},children:"Demo"}),Object(w.jsx)("span",{children:"Don't have an account?"}),Object(w.jsx)(b.b,{to:"/register",style:{textDecoration:"none"},children:" Sign Up"})]})]})},D=function(e){var t=e.setprofileArtistName,n=e.isAuthenticated,r=e.artists,s=(e.setArtists,e.getFav),c=Object(a.useState)(!1),o=Object(j.a)(c,2),i=o[0],u=o[1],l=function(){Object(a.useEffect)((function(){if(i){if(i)return}else s(),u(!0)}));return n?Object(w.jsx)(y.a,{className:"text-center",children:Object(w.jsxs)(y.a.Body,{children:[Object(w.jsx)(y.a.Title,{children:"Dashboard"}),Object(w.jsx)(y.a.Subtitle,{children:"My favorite artists:"}),r.map((function(e){return Object(w.jsxs)("div",{children:[Object(w.jsx)("button",{onClick:function(){return function(e){return t(e)}(e.name)},className:"btn btn-link",style:{display:"inline-block"},children:e.name}),Object(w.jsx)("button",{onClick:function(){return function(e){var t={"Content-Type":"application/json",token:localStorage.token};k.a.post("".concat(p,"api/deleteartist"),{name:e},{headers:t}).then((function(e){console.log("del artist",e),s()}))}(e.name)},className:"btn btn-outline-dark",children:"x"})]},e.name)}))]})}):Object(w.jsx)("div",{className:"text-center",children:"Login to save artists"})};return Object(w.jsxs)(T.a,{children:[Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)(l,{})]})},M=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post(f,{client_id:m,client_secret:x});case 2:return t=e.sent,n=t.data.token,console.log(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=n(16),R=n(62),I=g[Math.floor(Math.random()*g.length)];console.log("photo",I);var J=[],G=(new B.TextureLoader).load("https://raw.githubusercontent.com/adnjoo/artExplorer/main/assets/mona1.png"),F=(new B.TextureLoader).load("https://raw.githubusercontent.com/adnjoo/artExplorer/main/assets/kandinsky.png"),K=(new B.TextureLoader).load("https://raw.githubusercontent.com/adnjoo/artExplorer/main/assets/flowers.png"),X=(new B.TextureLoader).load("https://raw.githubusercontent.com/adnjoo/artExplorer/main/assets/hirst.png"),H=(new B.TextureLoader).load("https://raw.githubusercontent.com/adnjoo/artExplorer/main/assets/spots.png");J.push(G,F,K,X,H);var U=function(e){var t=e.propheight;function n(e){var t=Object(a.useState)(1),n=Object(j.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)(G),i=Object(j.a)(c,2),u=i[0],l=i[1],b=Object(a.useRef)(),d=Object(a.useState)(!1),h=Object(j.a)(d,1)[0];Object(R.b)((function(e,t){return b.current.rotation.y+=.005}));return Object(w.jsxs)("mesh",Object(o.a)(Object(o.a)({},e),{},{ref:b,scale:h?5:4,onClick:function(){if(r===J.length)return s(0),void l(J[r]);l(J[r]),s(r+1)},children:[Object(w.jsx)("boxGeometry",{args:[1,1,1]}),Object(w.jsx)("meshStandardMaterial",{map:u,attach:"material"})]}))}return console.log(t),Object(w.jsxs)(R.a,{className:"my-3",style:{height:t,outline:"1px solid",width:"80%",margin:"auto"},children:[Object(w.jsx)("ambientLight",{}),Object(w.jsx)("pointLight",{position:[10,10,10]}),Object(w.jsx)(n,{position:[0,0,0]})]})},W=function(e){e.setAuth;return Object(a.useEffect)((function(){!function(){var e=M();console.log(e)}()}),[]),Object(w.jsxs)("div",{children:[Object(w.jsx)(T.a,{className:"text-center my-5",children:"Artworks"}),Object(w.jsx)(U,{propheight:"400px"})]})},q=function(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)([]),c=Object(j.a)(s,2),o=c[0],i=c[1],b=Object(a.useState)([]),d=Object(j.a)(b,1)[0],h=function(){var e=Object(l.a)(u.a.mark((function e(t){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post(f,{client_id:m,client_secret:x});case 2:a=e.sent,s={"X-XAPP-Token":a.data.token},k.a.get("https://api.artsy.net/api/genes?artist_id=".concat(t),{headers:s}).then((function(e){var t=o;for(var a in console.log("initial",d),e.data._embedded.genes){var s={};s.name=e.data._embedded.genes[a].display_name,s.description=e.data._embedded.genes[a].description.replace(/ *\([^)]*\) */g," ").replace(/[[\]']+/g,""),s.src=e.data._embedded.genes[a]._links.thumbnail.href,t.push(s)}i(t),n||r(!0)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){h("4d8b92854eb68a1b2c0001b6")}));return Object(w.jsx)("div",{children:Object(w.jsxs)(T.a,{className:"text-center my-5",children:[Object(w.jsx)("p",{children:"Learn about art-movements:"}),Object(w.jsx)("br",{}),Object(w.jsx)("div",{id:"subcontainer",children:n?o.map((function(e){return null!==e.name?Object(w.jsxs)(y.a,{style:{width:"70%",margin:"auto"},children:[Object(w.jsx)(y.a.Title,{children:e.name}),Object(w.jsxs)(y.a.Body,{children:[Object(w.jsx)(y.a.Img,{style:{width:"150px",margin:"auto"},variant:"top",src:e.src}),Object(w.jsx)(y.a.Text,{children:e.description})]})]}):Object(w.jsx)(w.Fragment,{})})):Object(w.jsx)("div",{children:"loading"})})]})})};function V(){return Object(w.jsx)(T.a,{className:"text-center my-5",children:"user profile"})}function Y(){return Object(w.jsxs)("div",{className:"text-center",style:{marginTop:"200px",marginBottom:"20px"},children:["app made by \xa0",Object(w.jsx)("a",{href:"https://github.com/adnjoo/artexplorer",target:"_blank",rel:"noreferrer",children:"adnjoo"})]})}var z=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){s()}),[]);var s=function(){var e={"Content-Type":"application/json",token:localStorage.token};k.a.get("".concat(p,"api/getpopularartists"),{headers:e}).then((function(e){console.log(e.data.rows),r(e.data.rows)}))};return Object(w.jsx)(T.a,{className:"text-center my-5",children:Object(w.jsxs)(y.a,{children:[Object(w.jsx)(y.a.Title,{children:"Popular Artists"}),Object(w.jsx)(y.a.Body,{children:Object(w.jsx)(y.a.Text,{children:n.map((function(e){return Object(w.jsxs)("div",{children:[e.name,", ",e.count," followers"]})}))})})]})})};h.a.configure({position:"bottom-right",autoClose:3e3,draggable:!0,pauseOnHover:!1});var Q=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(!1),c=Object(j.a)(s,2),i=c[0],h=c[1],m=Object(a.useState)(""),x=Object(j.a)(m,2),f=x[0],O=x[1],g=Object(a.useState)(""),v=Object(j.a)(g,2),y=v[0],N=v[1];function A(){return T.apply(this,arguments)}function T(){return(T=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(p,"dashboard/"),{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,console.log("parseRes",n),N(n.user_name),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var _=function(){var e={"Content-Type":"application/json",token:localStorage.token};k.a.get("".concat(p,"api/getartists"),{headers:e}).then((function(e){r(e.data.rows)}))},E=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(p,"auth/is-verify"),{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,h(!0===n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){E()}),[]),Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)(C,{isAuth:i,setAuth:h,userName:y,getUserName:A}),Object(w.jsx)(b.a,{children:Object(w.jsxs)(d.d,{children:[Object(w.jsx)(d.b,{exact:!0,path:"/",render:function(){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(D,{isAuthenticated:i,setprofileArtistName:O,artists:n,setArtists:r,getFav:_}),Object(w.jsx)(S,{profileArtistName:f,isAuthenticated:i,artists:n,getFav:_})]})}}),Object(w.jsx)(d.b,{exact:!0,path:"/login",render:function(e){return i?Object(w.jsx)(d.a,{to:"/"}):Object(w.jsx)(P,Object(o.a)(Object(o.a)({},e),{},{setAuth:h,setuserName:N,getUserName:A}))}}),Object(w.jsx)(d.b,{exact:!0,path:"/register",render:function(e){return i?Object(w.jsx)(d.a,{to:"/"}):Object(w.jsx)(L,{setAuth:h})}}),Object(w.jsx)(d.b,{exact:!0,path:"/artworks",render:function(e){return Object(w.jsx)(W,{})}}),Object(w.jsx)(d.b,{exact:!0,path:"/artmovements",render:function(e){return Object(w.jsx)(q,{})}}),Object(w.jsx)(d.b,{exact:!0,path:"/popularartists",render:function(e){return Object(w.jsx)(z,{})}}),Object(w.jsx)(d.b,{exact:!0,path:"/profile",render:function(e){return i?Object(w.jsx)(V,{}):Object(w.jsx)("h4",{children:"404 page unavailable"})}})]})}),Object(w.jsx)(Y,{})]})};c.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(Q,{})}),document.getElementById("root"))}},[[116,1,2]]]);
//# sourceMappingURL=main.d8414247.chunk.js.map